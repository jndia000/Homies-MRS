<!-- Apply layout from base.html -->
{%extends 'base/basetop.html'%}
<!-- page title -->
{%block title%}
<title>MRS Request Medical Record | Hospital Management System</title>
<!-- BS Stepper -->
<link rel="stylesheet" href="{{url_for('static', path='/plugins/bs-stepper/css/bs-stepper.min.css')}}">
{%endblock%}



<!-- main content -->
{%block content%}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container">
            <div class="row mb-2">
                <div class="col-sm-12">
                     <h1 class="m-0"> Request Medical Record </h1><br>
                    <!--<h5>Step 1 out of 5</h5>
                    <div class="progress">
                        <div class="progress-bar bg-primary progress-bar" role="progressbar"
                             aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width: 15%">20%
                        </div>
                    </div> -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    <!-- Main content -->
    <div class="content">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body p-0">
                            <div class="bs-stepper">
                                <div class="bs-stepper-header" role="tablist">
                                    <!-- your steps here -->
                                    <div class="step" data-target="#details-part">
                                        <button type="button" class="step-trigger" role="tab" aria-controls="details-part" id="details-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">1</span>
                                            <span class="bs-stepper-label">Patient Details</span>
                                        </button>
                                    </div>
                                    <div class="line"></div>
                                    <div class="step" data-target="#guardian-part">
                                        <button type="button" class="step-trigger" role="tab" aria-controls="guardian-part" id="guardian-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">2</span>
                                            <span class="bs-stepper-label">Guardian Details</span>
                                        </button>
                                    </div>
                                    <div class="line"></div>
                                    <div class="step" data-target="#address-part">
                                        <button type="button" class="step-trigger" role="tab" aria-controls="address-part" id="address-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">3</span>
                                            <span class="bs-stepper-label">Address</span>
                                        </button>
                                    </div>
                                    <div class="line"></div>
                                    <div class="step" data-target="#purpose-part">
                                        <button type="button" class="step-trigger" role="tab" aria-controls="purpose-part" id="purpose-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">4</span>
                                            <span class="bs-stepper-label">Record Disclosure</span>
                                        </button>
                                    </div>
                                    <div class="line"></div>
                                    <div class="step" data-target="#delivery-part">
                                        <button type="button" class="step-trigger" role="tab" aria-controls="delivery-part" id="delivery-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">5</span>
                                            <span class="bs-stepper-label">Delivery</span>
                                        </button>
                                    </div>
                                    <div class="step" data-target="#summary-part" hidden>
                                        <button type="button" class="step-trigger" role="tab" aria-controls="summary-part" id="summary-part-trigger">
                                            <span class="bg-primary bs-stepper-circle">5</span>
                                            <span class="bs-stepper-label">Summary</span>
                                        </button>
                                    </div>
                                </div>

                                <div class="bs-stepper-content">
                                    <form id="requestForm" method="POST" enctype="multipart/form-data" >
                                        <!-- Details content -->
                                        <div id="details-part" class="content" role="tabpanel" aria-labelledby="details-part-trigger">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="requested_by">Patient Name</label>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <input name="r_patient_first_name" type="text" class="form-control" id="patient_first_name"
                                                                placeholder="Enter first name">
                                                            </div>
                                                            <div class="col-md-6">
                                                                <input name="r_patient_last_name" type="text" class="form-control" id="patient_last_name"
                                                                placeholder="Enter last name">
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="DOB">Patient Date of Birth</label>
                                                        <input type="date" name="r_patient_dob" class="form-control" id="patient_birth_date"
                                                            placeholder="Enter Date of Birth">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Gender</label>
                                                        <select class="form-control select2" name="r_patient_gender" id="patient_gender">
                                                            <option value="Female">Female</option>
                                                            <option value="Male">Male</option>
                                                            <option value="LGBTQ++">LGBTQ++</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInputFile">Valid ID</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" class="custom-file-input" name="r_patient_valid_id" id="patient_valid_id">
                                                                <label class="custom-file-label" for="exampleInputFile">Place Valid ID with picture</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="phone">Patient Record ID</label>
                                                        <input type="text" class="form-control" name="r_patient_record_id" id="patient_record_id"
                                                            placeholder="Enter Patient Record ID">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="email">Email</label>
                                                        <input type="email" class="form-control" name="r_patient_email" id="patient_email"
                                                            placeholder="Enter Email Address">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="patient_phone">Phone</label>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                                            </div>
                                                        <input type="text" class="form-control" name="r_patient_phone" id="patient_phone" placeholder="0999-999-9999" 
                                                        data-inputmask="'mask': ['9999-999-9999']" data-mask>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-primary" type="button" onclick="stepper.next()">Next</button>
                                            </div>
                                        </div>

                                        <!-- guardian content -->
                                        <div id="guardian-part" class="content" role="tabpanel" aria-labelledby="guardian-part-trigger">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="requested_by">Name</label>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <input type="text" class="form-control" name="r_requester_first_name" id="requester_first_name"
                                                                placeholder="Enter first name">
                                                            </div>
                                                            <div class="col-md-6">
                                                                <input type="text" class="form-control" name="r_requester_last_name" id="requester_last_name"
                                                                placeholder="Enter last name">
                                                            </div>
                                                            <div class="col-md-6" >
                                                                <div class="form-group clearfix">
                                                                    <div class="icheck-success">
                                                                      <input type="checkbox" id="getDetails">
                                                                      <label for="getDetails" class="text-secondary font-weight-light">
                                                                        Same as previous
                                                                      </label>
                                                                    </div>
                                                                  </div>
                                                            </div>
                                                        </div>
                                                    </div>  
                                                </div>  
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Relationship to the Patient</label>
                                                        <select class="form-control select2" name="r_requester_relationship" id="requester_relationship">
                                                            <option value="Guardian">Guardian</option>
                                                            <option value="Friend">Friend</option>
                                                            <option value="Colleague">Colleague</option>
                                                            <option value="Patient">Patient</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>    
                                                        
                                            <div class="row">
                                                <div class="col-md-6">            
                                                        
                                                    <div class="form-group">
                                                        <label for="DOB">Date of Birth</label>
                                                        <input type="date" class="form-control" name="r_requester_birth_date" id="requester_birth_date"
                                                            placeholder="Enter Date of Birth">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Gender</label>
                                                        <select class="form-control select2" name="r_requester_gender" id="requester_gender">
                                                            <option value="Female">Female</option>
                                                            <option value="Male">Male</option>
                                                            <option value="LGBTQ++">LGBTQ++</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group" id="r_valid_id">
                                                        <label for="exampleInputFile">Valid ID</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" class="custom-file-input" name="r_requester_valid_id" id="requester_valid_id">
                                                                <label class="custom-file-label" for="exampleInputFile">Place Valid ID with picture</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="email">Email</label>
                                                        <input type="email" class="form-control" name="r_requester_email" id="requester_email"
                                                            placeholder="Enter Email Address">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="patient_record_id">Phone</label>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                                            </div>
                                                        <input type="text" class="form-control" id="requester_phone"
                                                        placeholder="0999-999-9999" data-inputmask="'mask': ['9999-999-9999']" data-mask>   
                                                            </div>
                                                    </div>
                                                    <div class="form-group" id="r_letter">
                                                        <label for="exampleInputFile">Authorization Letter</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" class="custom-file-input" name="r_requester_letter" id="requester_letter">
                                                                <label class="custom-file-label" for="exampleInputFile">Place Authorization Letter</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-secondary" type="button" onclick="stepper.previous()">Previous</button>
                                                <button class="btn btn-primary" type="button" onclick="stepper.next()">Next</button> 
                                            </div> 
                                        </div>

                                        <!-- Address content -->
                                        <div id="address-part" class="content" role="tabpanel" aria-labelledby="address-part-trigger">    
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="house_number">House Number</label>
                                                        <input type="text" class="form-control" name="r_request_house_number" id="request_house_number"
                                                            placeholder="Enter House Number">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="street">Street</label>
                                                        <input type="text" class="form-control" name="r_request_street" id="request_street"
                                                            placeholder="Enter Street">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="barangay">Barangay</label>
                                                        <input type="text" class="form-control" name="r_request_barangay" id="request_barangay"
                                                            placeholder="Enter Barangay">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="municipality">Municipality</label>
                                                        <input type="text" class="form-control" name="r_request_municipality" id="request_municipality"
                                                            placeholder="Enter Municipality">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="strprovinceeet">Province</label>
                                                        <input type="text" class="form-control" name="r_request_province" id="request_province"
                                                            placeholder="Enter Province">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-secondary" type="button" onclick="stepper.previous()">Previous</button>
                                                <button class="btn btn-primary" type="button" onclick="stepper.next()">Next</button> 
                                            </div> 
                                        </div>

                                        <!-- Purpose content -->
                                        <div id="purpose-part" class="content" role="tabpanel" aria-labelledby="purpose-part-trigger">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Information to be released</label>
                                                        <div class="form-group clearfix">
                                                            <div class="icheck-success">
                                                                <input type="checkbox" id="1" name="request_info[]"  class="request_info" value="Medical History">
                                                                <label class="font-weight-normal" for="1">
                                                                    Medical History
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="checkbox" id="2" name="request_info[]"  class="request_info" value="Medical Problem">
                                                                <label class="font-weight-normal" for="2">
                                                                    Medical Problem
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="checkbox" id="3" name="request_info[]"  class="request_info" value="Diagnostic Result">
                                                                <label class="font-weight-normal" for="3">
                                                                    Diagnostic Result
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="checkbox" id="4" name="request_info[]"  class="request_info" value="Laboratory Result">
                                                                <label class="font-weight-normal" for="4">
                                                                    Laboratory Result
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="checkbox" id="5" name="request_info[]"  class="request_info" value="Progress Notes">
                                                                <label class="font-weight-normal" for="5">
                                                                    Progress Notes
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Reason for Disclosure</label>
                                                        <div class="form-group clearfix">
                                                            <div class="icheck-success">
                                                                <input type="radio" id="6" name="reason" value="Changing Physician">
                                                                <label class="font-weight-normal" for="6">
                                                                    Changing Physician
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="radio" id="7" name="reason" value="Legal">
                                                                <label class="font-weight-normal" for="7">
                                                                    Legal
                                                                </label>
                                                            </div>
                                                            <div class="icheck-success">
                                                                <input type="radio" id="8" name="reason" value="Personal Access">
                                                                <label class="font-weight-normal" for="8">
                                                                    For Personal Access
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            
                                            
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-secondary" type="button" onclick="stepper.previous()">Previous</button>
                                                <button class="btn btn-primary" type="button" onclick="stepper.next()">Next</button> 
                                            </div>
                                        </div>

                                        <!-- Delivery preference content -->
                                        <div id="delivery-part" class="content" role="tabpanel" aria-labelledby="delivery-part-trigger">
                                            <div class="form-group">
                                                <label>Delivery Preference</label>
                                                <select class="form-control select2" name="r_delivery" id="delivery">
                                                    <option value="Email">Email</option>
                                                    <option value="Standard Pick-up">Standard Pick-up</option>
                                                </select>
                                            </div>
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-secondary" type="button" onclick="stepper.previous()">Previous</button>
                                                <button class="btn btn-primary" type="button" onclick="showformcontent(); stepper.next(); ">Submit</button> 
                                            </div>
                                        </div>

                                        <!-- summary content -->
                                        <div id="summary-part" class="content" role="tabpanel" aria-labelledby="summary-part-trigger">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label>Patient Record ID:</label><span class="pl-1" id="v_record_id"></span><br>
                                                                <label>Patient Name:</label><span class="pl-1" id="v_patient_name"></span><br>
                                                                <label>Date of Birth:</label><span class="pl-1" id="v_patient_dob"></span><br>
                                                                <label>Gender:</label><span class="pl-1" id="v_patient_gender"></span><br>
                                                                <label>Email:</label><span class="pl-1" id="v_patient_email"></span><br>
                                                                <label>Phone:</label><span class="pl-1" id="v_patient_phone"></span><br>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 table-responsive">
                                                            <div class="form-group">
                                                                <table class="table table-borderless">
                                                                    <tr>
                                                                        <td>
                                                                            <label>Information to be Released:</label>
                                                                        </td>
                                                                        <td>
                                                                            <span class="pl-1" id="v_request_info"></span>
                                                                        </td>
                                                                    </tr>
                                                            </table>
                                                                <label>Reason for Disclosre:</label><span class="pl-1" id="v_reason"></span><br>
                                                                <label>Delivery Preference:</label><span class="pl-1" id="v_delivery"></span><br>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <hr>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label>Requested by</label><span class="pl-1" id="v_name"></span><br>
                                                                <label>Relationship to the Patient:</label><span class="pl-1" id="v_relationship"></span><br>
                                                                <label>Date of Birth:</label><span class="pl-1" id="v_dob"></span><br>
                                                                <label>Gender:</label><span class="pl-1" id="v_gender"></span><br>
                                                                <label>Email:</label><span class="pl-1" id="v_email"></span><br>
                                                                <label>Phone:</label><spanv class="pl-1" id="v_phone"></span><br>
                                                                <label>Address:</label><span class="pl-1" id="v_address"></span><br>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label>Patient ID:</label><span class="pl-1" id="v_patient_id"></span><br>
                                                                <label>Requester ID:</label><span class="pl-1" id="v_requester_id"></span><br>
                                                                <label>Authoriation Letter:</label><span class="pl-1" id="v_requester_letter"></span><br>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer col-md-12">
                                                <button class="btn btn-secondary" type="button" onclick="stepper.previous()">Previous</button>
                                                <button type="submit" class="btn btn-primary" id="requestBtn">Submit</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                              </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<!-- request AJAX -->

{%endblock%}

{%block plugins_js%}
 <!-- InputMask -->
 <!-- BS-Stepper -->
 <script src="{{url_for('static', path='/plugins/bs-stepper/js/bs-stepper.min.js')}}"></script>
<script src="{{url_for('static', path='/requestAJAX.js')}}"></script>
 <!-- InputMask -->
 <script src="{{url_for('static', path='/plugins/moment/moment.min.js')}}"></script>
 <script src="{{url_for('static', path='/plugins/inputmask/jquery.inputmask.min.js')}}"></script>
 <script>
    //Money Euro
    $(":input").inputmask();
    $("#patient_phone").inputmask({"mask": "(9999) 999-9999"});
</script>
{%endblock%}
{%block scripts%}
<script>
    $(function () {
  bsCustomFileInput.init();
});
  // BS-Stepper Init
  document.addEventListener('DOMContentLoaded', function () {
    window.stepper = new Stepper(document.querySelector('.bs-stepper'))
  })

</script>

{%endblock%}